<!DOCTYPE html>
<html lang="en">
<head>
    <script type="module" src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js"></script>
    <style>
        body { margin: 0; background: #444; color: white; font-family: sans-serif; }
        .scene-wrapper { position: relative; width: 100vw; height: 100vh; overflow: hidden; }
        
        /* Room is the anchor */
        #room { position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: 1; }
        
        /* Sofa floats on top */
        #sofa { position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: 2; pointer-events: none; }

        .dev-panel {
            position: absolute; bottom: 10px; left: 10px; z-index: 100;
            background: rgba(0,0,0,0.9); padding: 15px; border-radius: 8px; width: 320px;
        }
        input[type=range] { width: 100%; margin-bottom: 10px; }
        label { font-size: 12px; color: #aaa; }
        .value-display { float: right; color: #0f0; font-weight: bold; }
    </style>
</head>
<body>

<div class="scene-wrapper">
    <model-viewer id="room" src="Room.glb" camera-controls disable-zoom exposure="1"></model-viewer>
    
    <model-viewer id="sofa" src="Sofa1.glb" exposure="1" camera-target="0m 0m 0m"></model-viewer>
</div>

<div class="dev-panel">
    <h3>üõ†Ô∏è Developer Calibration</h3>
    <p style="font-size: 11px; margin-top:-10px;">Adjust these until the sofa sits on the floor. Write down the numbers!</p>

    <label>Choose Sofa:</label>
    <select id="selector" style="width:100%; padding:5px; margin-bottom:10px;">
        <option value="Sofa1.glb">Sofa 1</option>
        <option value="Sofa2.glb">Sofa 2</option>
        <option value="Sofa3.glb">Sofa 3</option>
        <option value="Sofa4.glb">Sofa 4</option>
        <option value="Sofa5.glb">Sofa 5</option>
    </select>

    <label>Scale (Size) <span id="val-scale" class="value-display">1.0</span></label>
    <input type="range" id="inp-scale" min="0.01" max="5" step="0.01" value="1">

    <label>Vertical Height (Y) <span id="val-y" class="value-display">0m</span></label>
    <input type="range" id="inp-y" min="-5" max="5" step="0.1" value="0">
    
    <label>Forward/Back (Z) <span id="val-z" class="value-display">0m</span></label>
    <input type="range" id="inp-z" min="-10" max="10" step="0.1" value="0">
</div>

<script>
    const room = document.querySelector('#room');
    const sofa = document.querySelector('#sofa');
    
    // Sync rotation
    room.addEventListener('camera-change', () => {
        sofa.cameraOrbit = room.cameraOrbit;
        sofa.fieldOfView = room.fieldOfView;
    });

    // Inputs
    const sel = document.querySelector('#selector');
    const scaleInp = document.querySelector('#inp-scale');
    const yInp = document.querySelector('#inp-y');
    const zInp = document.querySelector('#inp-z');

    // Update Function
    function update() {
        const s = scaleInp.value;
        const y = yInp.value; 
        const z = zInp.value;

        // Apply Scale
        sofa.scale = `${s} ${s} ${s}`;
        
        // Apply Position Hack: We move the CAMERA TARGET.
        // If we want sofa to go DOWN, we look LOWER (negative Y).
        // If we want sofa to go BACK, we look deeper (Z).
        sofa.cameraTarget = `0m ${y}m ${z}m`;

        // Update Text
        document.querySelector('#val-scale').innerText = s;
        document.querySelector('#val-y').innerText = y + 'm';
        document.querySelector('#val-z').innerText = z + 'm';
    }

    // Listeners
    scaleInp.addEventListener('input', update);
    yInp.addEventListener('input', update);
    zInp.addEventListener('input', update);
    sel.addEventListener('change', (e) => { sofa.src = e.target.value; });
</script>
</body>
</html>
